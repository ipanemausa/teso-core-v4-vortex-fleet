const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GeminiConsultantArtifact.BM-3OUua.js","assets/index.Bt0VkSde.js","assets/index.CgISEjeh.css"])))=>i.map(i=>d[i]);
import{E as xt,j as s,r as m,M as mt,T as St,a as be,v as Ct,P as ze,b as bt,u as wt,p as Et,R as Be,_ as Dt}from"./index.Bt0VkSde.js";import At from"./ClientDashboard.imsGir5c.js";function _e(n,e,i,t,r){t=t||{};var a=1.15,l=r.internal.scaleFactor,d=r.internal.getFontSize()/l,c=r.getLineHeightFactor?r.getLineHeightFactor():a,o=d*c,h=/\r\n|\r|\n/g,f="",g=1;if((t.valign==="middle"||t.valign==="bottom"||t.halign==="center"||t.halign==="right")&&(f=typeof n=="string"?n.split(h):n,g=f.length||1),i+=d*(2-a),t.valign==="middle"?i-=g/2*o:t.valign==="bottom"&&(i-=g*o),t.halign==="center"||t.halign==="right"){var p=d;if(t.halign==="center"&&(p*=.5),f&&g>=1){for(var v=0;v<f.length;v++)r.text(f[v],e-r.getStringUnitWidth(f[v])*p,i),i+=o;return r}e-=r.getStringUnitWidth(n)*p}return t.halign==="justify"?r.text(n,e,i,{maxWidth:t.maxWidth||100,align:"justify"}):r.text(n,e,i),r}var Re={},ae=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,i){i===void 0&&(i=null),i?i.__autoTableDocumentDefaults=e:Re=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,i){var t,r,a;i===void 0&&(i=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var l=this.jsPDFDocument.internal.getFont(),d=l.fontStyle,c=l.fontName;if(e.font&&(c=e.font),e.fontStyle){d=e.fontStyle;var o=this.getFontList()[c];o&&o.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(o[0]),d=o[0])}if(this.jsPDFDocument.setFont(c,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!i){var h=n.unifyColor(e.fillColor);h&&(t=this.jsPDFDocument).setFillColor.apply(t,h),h=n.unifyColor(e.textColor),h&&(r=this.jsPDFDocument).setTextColor.apply(r,h),h=n.unifyColor(e.lineColor),h&&(a=this.jsPDFDocument).setDrawColor.apply(a,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,i,t){return this.jsPDFDocument.splitTextToSize(e,i,t)},n.prototype.rect=function(e,i,t,r,a){return this.jsPDFDocument.rect(e,i,t,r,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return Re||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),we=function(n,e){return we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])},we(n,e)};function Ue(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");we(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Ge=(function(n){Ue(e,n);function e(i){var t=n.call(this)||this;return t._element=i,t}return e})(Array);function Tt(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function It(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function ge(n,e,i){i.applyStyles(e,!0);var t=Array.isArray(n)?n:[n],r=t.map(function(a){return i.getTextWidth(a)}).reduce(function(a,l){return Math.max(a,l)},0);return r}function Ve(n,e,i,t){var r=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:r,lineColor:a});var l=$e(r,!1);l&&n.rect(i.x,i.y,e.getWidth(n.pageSize().width),t.y-i.y,l)}function $e(n,e){var i=n>0,t=e||e===0;return i&&t?"DF":i?"S":t?"F":null}function ue(n,e){var i,t,r,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(i=n.left)!==null&&i!==void 0?i:e,top:(t=n.top)!==null&&t!==void 0?t:e,right:(r=n.right)!==null&&r!==void 0?r:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function Ye(n,e){var i=ue(e.settings.margin,0);return n.pageSize().width-(i.left+i.right)}function jt(n,e,i,t,r){var a={},l=1.3333333333333333,d=xe(e,function(k){return r.getComputedStyle(k).backgroundColor});d!=null&&(a.fillColor=d);var c=xe(e,function(k){return r.getComputedStyle(k).color});c!=null&&(a.textColor=c);var o=Pt(t,i);o&&(a.cellPadding=o);var h="borderTopColor",f=l*i,g=t.borderTopWidth;if(t.borderBottomWidth===g&&t.borderRightWidth===g&&t.borderLeftWidth===g){var p=(parseFloat(g)||0)/f;p&&(a.lineWidth=p)}else a.lineWidth={top:(parseFloat(t.borderTopWidth)||0)/f,right:(parseFloat(t.borderRightWidth)||0)/f,bottom:(parseFloat(t.borderBottomWidth)||0)/f,left:(parseFloat(t.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?h="borderRightColor":a.lineWidth.bottom?h="borderBottomColor":a.lineWidth.left&&(h="borderLeftColor"));var v=xe(e,function(k){return r.getComputedStyle(k)[h]});v!=null&&(a.lineColor=v);var A=["left","right","center","justify"];A.indexOf(t.textAlign)!==-1&&(a.halign=t.textAlign),A=["middle","bottom","top"],A.indexOf(t.verticalAlign)!==-1&&(a.valign=t.verticalAlign);var b=parseInt(t.fontSize||"");isNaN(b)||(a.fontSize=b/l);var j=Rt(t);j&&(a.fontStyle=j);var H=(t.fontFamily||"").toLowerCase();return n.indexOf(H)!==-1&&(a.font=H),a}function Rt(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function xe(n,e){var i=Ke(n,e);if(!i)return null;var t=i.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!t||!Array.isArray(t))return null;var r=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],a=parseInt(t[4]);return a===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Ke(n,e){var i=e(n);return i==="rgba(0, 0, 0, 0)"||i==="transparent"||i==="initial"||i==="inherit"?n.parentElement==null?null:Ke(n.parentElement,e):i}function Pt(n,e){var i=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],t=96/(72/e),r=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=i.map(function(d){return parseInt(d||"0")/t}),l=ue(a,0);return r>l.top&&(l.top=r),r>l.bottom&&(l.bottom=r),l}function Je(n,e,i,t,r){var a,l;t===void 0&&(t=!1),r===void 0&&(r=!1);var d;typeof e=="string"?d=i.document.querySelector(e):d=e;var c=Object.keys(n.getFontList()),o=n.scaleFactor(),h=[],f=[],g=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:h,body:f,foot:g};for(var p=0;p<d.rows.length;p++){var v=d.rows[p],A=(l=(a=v?.parentElement)===null||a===void 0?void 0:a.tagName)===null||l===void 0?void 0:l.toLowerCase(),b=Ot(c,o,i,v,t,r);b&&(A==="thead"?h.push(b):A==="tfoot"?g.push(b):f.push(b))}return{head:h,body:f,foot:g}}function Ot(n,e,i,t,r,a){for(var l=new Ge(t),d=0;d<t.cells.length;d++){var c=t.cells[d],o=i.getComputedStyle(c);if(r||o.display!=="none"){var h=void 0;a&&(h=jt(n,c,e,o,i)),l.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:h,_element:c,content:Nt(c)})}}var f=i.getComputedStyle(t);if(l.length>0&&(r||f.display!=="none"))return l}function Nt(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(i){return i.trim()}).join(`
`),e.innerText||e.textContent||""}function Ft(n,e,i){for(var t=0,r=[n,e,i];t<r.length;t++){var a=r[t];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function U(n,e,i,t,r){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),l=1;l<arguments.length;l++){var d=arguments[l];if(d!=null)for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}return a}function Xe(n,e){var i=new ae(n),t=i.getDocumentOptions(),r=i.getGlobalOptions();Ft(r,t,e);var a=U({},r,t,e),l;typeof window<"u"&&(l=window);var d=Mt(r,t,e),c=Lt(r,t,e),o=kt(i,a),h=Ht(i,a,l);return{id:e.tableId,content:h,hooks:c,styles:d,settings:o}}function Mt(n,e,i){for(var t={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(c){if(c==="columnStyles"){var o=n[c],h=e[c],f=i[c];t.columnStyles=U({},o,h,f)}else{var g=[n,e,i],p=g.map(function(v){return v[c]||{}});t[c]=U({},p[0],p[1],p[2])}},a=0,l=Object.keys(t);a<l.length;a++){var d=l[a];r(d)}return t}function Lt(n,e,i){for(var t=[n,e,i],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,l=t;a<l.length;a++){var d=l[a];d.didParseCell&&r.didParseCell.push(d.didParseCell),d.willDrawCell&&r.willDrawCell.push(d.willDrawCell),d.didDrawCell&&r.didDrawCell.push(d.didDrawCell),d.willDrawPage&&r.willDrawPage.push(d.willDrawPage),d.didDrawPage&&r.didDrawPage.push(d.didDrawPage)}return r}function kt(n,e){var i,t,r,a,l,d,c,o,h,f,g,p,v=ue(e.margin,40/n.scaleFactor()),A=(i=Wt(n,e.startY))!==null&&i!==void 0?i:v.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(t=e.showFoot)!==null&&t!==void 0?t:"everyPage";var j;e.showHead===!0?j="everyPage":e.showHead===!1?j="never":j=(r=e.showHead)!==null&&r!==void 0?r:"everyPage";var H=(a=e.useCss)!==null&&a!==void 0?a:!1,k=e.theme||(H?"plain":"striped"),X=!!e.horizontalPageBreak,V=(l=e.horizontalPageBreakRepeat)!==null&&l!==void 0?l:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:H,theme:k,startY:A,margin:v,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(o=e.rowPageBreak)!==null&&o!==void 0?o:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:j,showFoot:b,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:X,horizontalPageBreakRepeat:V,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Wt(n,e){var i=n.getLastAutoTable(),t=n.scaleFactor(),r=n.pageNumber(),a=!1;if(i&&i.startPageNumber){var l=i.startPageNumber+i.pageNumber-1;a=l===r}return typeof e=="number"?e:(e==null||e===!1)&&a&&i?.finalY!=null?i.finalY+20/t:null}function Ht(n,e,i){var t=e.head||[],r=e.body||[],a=e.foot||[];if(e.html){var l=e.includeHiddenHtml;if(i){var d=Je(n,e.html,i,l,e.useCss)||{};t=d.head||t,r=d.body||t,a=d.foot||t}else console.error("Cannot parse html in non browser environment")}var c=e.columns||zt(t,r,a);return{columns:c,head:t,body:r,foot:a}}function zt(n,e,i){var t=n[0]||e[0]||i[0]||[],r=[];return Object.keys(t).filter(function(a){return a!=="_element"}).forEach(function(a){var l=1,d;Array.isArray(t)?d=t[parseInt(a)]:d=t[a],typeof d=="object"&&!Array.isArray(d)&&(l=d?.colSpan||1);for(var c=0;c<l;c++){var o=void 0;Array.isArray(t)?o=r.length:o=a+(c>0?"_".concat(c):"");var h={dataKey:o};r.push(h)}}),r}var Ee=(function(){function n(e,i,t){this.table=i,this.pageNumber=i.pageNumber,this.settings=i.settings,this.cursor=t,this.doc=e.getDocument()}return n})(),Bt=(function(n){Ue(e,n);function e(i,t,r,a,l,d){var c=n.call(this,i,t,d)||this;return c.cell=r,c.row=a,c.column=l,c.section=a.section,c}return e})(Ee),_t=(function(){function n(e,i){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=i.columns,this.head=i.head,this.body=i.body,this.foot=i.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(i,t){return i+t.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(i,t){return i+t.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,i,t,r,a,l){for(var d=0,c=i;d<c.length;d++){var o=c[d],h=new Bt(e,this,t,r,a,l),f=o(h)===!1;if(t.text=Array.isArray(t.text)?t.text:[t.text],f)return!1}return!0},n.prototype.callEndPageHooks=function(e,i){e.applyStyles(e.userStyles);for(var t=0,r=this.hooks.didDrawPage;t<r.length;t++){var a=r[t];a(new Ee(e,this,i))}},n.prototype.callWillDrawPageHooks=function(e,i){for(var t=0,r=this.hooks.willDrawPage;t<r.length;t++){var a=r[t];a(new Ee(e,this,i))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var i=this.columns.reduce(function(r,a){return r+a.wrappedWidth},0);return i}else{var t=this.settings.margin;return e-t.left-t.right}},n})(),Ze=(function(){function n(e,i,t,r,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof Ge&&(this.raw=e._element,this.element=e._element),this.index=i,this.section=t,this.cells=r,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var i=this;return e.reduce(function(t,r){var a;return Math.max(t,((a=i.cells[r.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var i=this;return e.filter(function(t){var r=i.cells[t.index];return r?r.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,i){return this.getMaxCellHeight(i)<=e},n.prototype.getMinimumRowHeight=function(e,i){var t=this;return e.reduce(function(r,a){var l=t.cells[a.index];if(!l)return 0;var d=i.getLineHeight(l.styles.fontSize),c=l.padding("vertical"),o=c+d;return o>r?o:r},0)},n})(),Qe=(function(){function n(e,i,t){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=i,this.section=t,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(r=e.content)!==null&&r!==void 0?r:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var l=a!=null?""+a:"",d=/\r\n|\r|\n/g;this.text=l.split(d)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var i=this.height-this.padding("vertical");e=this.y+i/2+this.padding("top")}var t;if(this.styles.halign==="right")t=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");t=this.x+r/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},n.prototype.getContentHeight=function(e,i){i===void 0&&(i=1.15);var t=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/e*i,a=t*r+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var i=ue(this.styles.cellPadding,0);return e==="vertical"?i.top+i.bottom:e==="horizontal"?i.left+i.right:i[e]},n})(),Ut=(function(){function n(e,i,t){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=i,this.index=t}return n.prototype.getMaxCustomCellWidth=function(e){for(var i=0,t=0,r=e.allRows();t<r.length;t++){var a=r[t],l=a.cells[this.index];l&&typeof l.styles.cellWidth=="number"&&(i=Math.max(i,l.styles.cellWidth))}return i},n})();function Gt(n,e){Vt(n,e);var i=[],t=0;e.columns.forEach(function(a){var l=a.getMaxCustomCellWidth(e);l?a.width=l:(a.width=a.wrappedWidth,i.push(a)),t+=a.width});var r=e.getWidth(n.pageSize().width)-t;r&&(r=De(i,r,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),r&&(r=De(i,r,function(a){return a.minWidth})),r=Math.abs(r),!e.settings.horizontalPageBreak&&r>.1/n.scaleFactor()&&(r=r<1?r:Math.round(r),console.log("Of the table content, ".concat(r," units width could not fit page"))),Yt(e),Kt(e,n),$t(e)}function Vt(n,e){var i=n.scaleFactor(),t=e.settings.horizontalPageBreak,r=Ye(n,e);e.allRows().forEach(function(a){for(var l=0,d=e.columns;l<d.length;l++){var c=d[l],o=a.cells[c.index];if(o){var h=e.hooks.didParseCell;e.callCellHooks(n,h,o,a,c,null);var f=o.padding("horizontal");o.contentWidth=ge(o.text,o.styles,n)+f;var g=ge(o.text.join(" ").split(/[^\S\u00A0]+/),o.styles,n);if(o.minReadableWidth=g+o.padding("horizontal"),typeof o.styles.cellWidth=="number")o.minWidth=o.styles.cellWidth,o.wrappedWidth=o.styles.cellWidth;else if(o.styles.cellWidth==="wrap"||t===!0)o.contentWidth>r?(o.minWidth=r,o.wrappedWidth=r):(o.minWidth=o.contentWidth,o.wrappedWidth=o.contentWidth);else{var p=10/i;o.minWidth=o.styles.minCellWidth||p,o.wrappedWidth=o.contentWidth,o.minWidth>o.wrappedWidth&&(o.wrappedWidth=o.minWidth)}}}}),e.allRows().forEach(function(a){for(var l=0,d=e.columns;l<d.length;l++){var c=d[l],o=a.cells[c.index];if(o&&o.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,o.wrappedWidth),c.minWidth=Math.max(c.minWidth,o.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,o.minReadableWidth);else{var h=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=h.cellWidth||h.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}o&&(o.colSpan>1&&!c.minWidth&&(c.minWidth=o.minWidth),o.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=o.minWidth))}})}function De(n,e,i){for(var t=e,r=n.reduce(function(p,v){return p+v.wrappedWidth},0),a=0;a<n.length;a++){var l=n[a],d=l.wrappedWidth/r,c=t*d,o=l.width+c,h=i(l),f=o<h?h:o;e-=f-l.width,l.width=f}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(p){return e<0?p.width>i(p):!0});g.length&&(e=De(g,e,i))}return e}function $t(n){for(var e={},i=1,t=n.allRows(),r=0;r<t.length;r++)for(var a=t[r],l=0,d=n.columns;l<d.length;l++){var c=d[l],o=e[c.index];if(i>1)i--,delete a.cells[c.index];else if(o)o.cell.height+=a.height,i=o.cell.colSpan,delete a.cells[c.index],o.left--,o.left<=1&&delete e[c.index];else{var h=a.cells[c.index];if(!h)continue;if(h.height=a.height,h.rowSpan>1){var f=t.length-r,g=h.rowSpan>f?f:h.rowSpan;e[c.index]={cell:h,left:g,row:a}}}}}function Yt(n){for(var e=n.allRows(),i=0;i<e.length;i++)for(var t=e[i],r=null,a=0,l=0,d=0;d<n.columns.length;d++){var c=n.columns[d];if(l-=1,l>1&&n.columns[d+1])a+=c.width,delete t.cells[c.index];else if(r){var o=r;delete t.cells[c.index],r=null,o.width=c.width+a}else{var o=t.cells[c.index];if(!o)continue;if(l=o.colSpan,a=0,o.colSpan>1){r=o,a+=c.width;continue}o.width=c.width+a}}}function Kt(n,e){for(var i={count:0,height:0},t=0,r=n.allRows();t<r.length;t++){for(var a=r[t],l=0,d=n.columns;l<d.length;l++){var c=d[l],o=a.cells[c.index];if(o){e.applyStyles(o.styles,!0);var h=o.width-o.padding("horizontal");if(o.styles.overflow==="linebreak")o.text=e.splitTextToSize(o.text,h+1/e.scaleFactor(),{fontSize:o.styles.fontSize});else if(o.styles.overflow==="ellipsize")o.text=Pe(o.text,h,o.styles,e,"...");else if(o.styles.overflow==="hidden")o.text=Pe(o.text,h,o.styles,e,"");else if(typeof o.styles.overflow=="function"){var f=o.styles.overflow(o.text,h);typeof f=="string"?o.text=[f]:o.text=f}o.contentHeight=o.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=o.contentHeight/o.rowSpan;o.rowSpan>1&&i.count*i.height<g*o.rowSpan?i={height:g,count:o.rowSpan}:i&&i.count>0&&i.height>g&&(g=i.height),g>a.height&&(a.height=g)}}i.count--}}function Pe(n,e,i,t,r){return n.map(function(a){return Jt(a,e,i,t,r)})}function Jt(n,e,i,t,r){var a=1e4*t.scaleFactor();if(e=Math.ceil(e*a)/a,e>=ge(n,i,t))return n;for(;e<ge(n+r,i,t)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+r}function qe(n,e){var i=new ae(n),t=Xt(e,i.scaleFactor()),r=new _t(e,t);return Gt(i,r),i.applyStyles(i.userStyles),r}function Xt(n,e){var i=n.content,t=Qt(i.columns);if(i.head.length===0){var r=Oe(t,"head");r&&i.head.push(r)}if(i.foot.length===0){var r=Oe(t,"foot");r&&i.foot.push(r)}var a=n.settings.theme,l=n.styles;return{columns:t,head:me("head",i.head,t,l,a,e),body:me("body",i.body,t,l,a,e),foot:me("foot",i.foot,t,l,a,e)}}function me(n,e,i,t,r,a){var l={},d=e.map(function(c,o){for(var h=0,f={},g=0,p=0,v=0,A=i;v<A.length;v++){var b=A[v];if(l[b.index]==null||l[b.index].left===0)if(p===0){var j=void 0;Array.isArray(c)?j=c[b.index-g-h]:j=c[b.dataKey];var H={};typeof j=="object"&&!Array.isArray(j)&&(H=j?.styles||{});var k=qt(n,b,o,r,t,a,H),X=new Qe(j,k,n);f[b.dataKey]=X,f[b.index]=X,p=X.colSpan-1,l[b.index]={left:X.rowSpan-1,times:p}}else p--,g++;else l[b.index].left--,p=l[b.index].times,h++}return new Ze(c,o,n,f)});return d}function Oe(n,e){var i={};return n.forEach(function(t){if(t.raw!=null){var r=Zt(e,t.raw);r!=null&&(i[t.dataKey]=r)}}),Object.keys(i).length>0?i:null}function Zt(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function Qt(n){return n.map(function(e,i){var t,r;return typeof e=="object"?r=(t=e.dataKey)!==null&&t!==void 0?t:i:r=i,new Ut(r,e,i)})}function qt(n,e,i,t,r,a,l){var d=It(t),c;n==="head"?c=r.headStyles:n==="body"?c=r.bodyStyles:n==="foot"&&(c=r.footStyles);var o=U({},d.table,d[n],r.styles,c),h=r.columnStyles[e.dataKey]||r.columnStyles[e.index]||{},f=n==="body"?h:{},g=n==="body"&&i%2===0?U({},d.alternateRow,r.alternateRowStyles):{},p=Tt(a),v=U({},p,o,g,f);return U(v,l)}function en(n,e,i){var t;i===void 0&&(i={});var r=Ye(n,e),a=new Map,l=[],d=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var p=e.columns.find(function(v){return v.dataKey===g||v.index===g});p&&!a.has(p.index)&&(a.set(p.index,!0),l.push(p.index),d.push(e.columns[p.index]),r-=p.wrappedWidth)});for(var o=!0,h=(t=i?.start)!==null&&t!==void 0?t:0;h<e.columns.length;){if(a.has(h)){h++;continue}var f=e.columns[h].wrappedWidth;if(o||r>=f)o=!1,l.push(h),d.push(e.columns[h]),r-=f;else break;h++}return{colIndexes:l,columns:d,lastIndex:h-1}}function tn(n,e){for(var i=[],t=0;t<e.columns.length;t++){var r=en(n,e,{start:t});r.columns.length&&(i.push(r),t=r.lastIndex)}return i}function et(n,e){var i=e.settings,t=i.startY,r=i.margin,a={x:r.left,y:t},l=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=t+r.bottom+l;if(i.pageBreak==="avoid"){var c=e.body,o=c.reduce(function(g,p){return g+p.height},0);d+=o}var h=new ae(n);(i.pageBreak==="always"||i.startY!=null&&d>h.pageSize().height)&&(nt(h),a.y=r.top),e.callWillDrawPageHooks(h,a);var f=U({},a);e.startPageNumber=h.pageNumber(),i.horizontalPageBreak?nn(h,e,f,a):(h.applyStyles(h.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(g){return G(h,e,g,a,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(g,p){var v=p===e.body.length-1;pe(h,e,g,v,f,a,e.columns)}),h.applyStyles(h.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(g){return G(h,e,g,a,e.columns)})),Ve(h,e,f,a),e.callEndPageHooks(h,a),e.finalY=a.y,n.lastAutoTable=e,h.applyStyles(h.userStyles)}function nn(n,e,i,t){var r=tn(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(o,h){n.applyStyles(n.userStyles),h>0?ce(n,e,i,t,o.columns,!0):Ne(n,e,t,o.columns),rn(n,e,i,t,o.columns),Se(n,e,t,o.columns)});else for(var l=-1,d=r[0],c=function(){var o=l;if(d){n.applyStyles(n.userStyles);var h=d.columns;l>=0?ce(n,e,i,t,h,!0):Ne(n,e,t,h),o=Fe(n,e,l+1,t,h),Se(n,e,t,h)}var f=o-l;r.slice(1).forEach(function(g){n.applyStyles(n.userStyles),ce(n,e,i,t,g.columns,!0),Fe(n,e,l+1,t,g.columns,f),Se(n,e,t,g.columns)}),l=o};l<e.body.length-1;)c()}function Ne(n,e,i,t){var r=e.settings;n.applyStyles(n.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(a){return G(n,e,a,i,t)})}function rn(n,e,i,t,r){n.applyStyles(n.userStyles),e.body.forEach(function(a,l){var d=l===e.body.length-1;pe(n,e,a,d,i,t,r)})}function Fe(n,e,i,t,r,a){n.applyStyles(n.userStyles),a=a??e.body.length;var l=Math.min(i+a,e.body.length),d=-1;return e.body.slice(i,l).forEach(function(c,o){var h=i+o===e.body.length-1,f=tt(n,e,h,t);c.canEntireRowFit(f,r)&&(G(n,e,c,t,r),d=i+o)}),d}function Se(n,e,i,t){var r=e.settings;n.applyStyles(n.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(a){return G(n,e,a,i,t)})}function an(n,e,i){var t=i.getLineHeight(n.styles.fontSize),r=n.padding("vertical"),a=Math.floor((e-r)/t);return Math.max(0,a)}function on(n,e,i,t){var r={};n.spansMultiplePages=!0,n.height=0;for(var a=0,l=0,d=i.columns;l<d.length;l++){var c=d[l],o=n.cells[c.index];if(o){Array.isArray(o.text)||(o.text=[o.text]);var h=new Qe(o.raw,o.styles,o.section);h=U(h,o),h.text=[];var f=an(o,e,t);o.text.length>f&&(h.text=o.text.splice(f,o.text.length));var g=t.scaleFactor(),p=t.getLineHeightFactor();o.contentHeight=o.getContentHeight(g,p),o.contentHeight>=e&&(o.contentHeight=e,h.styles.minCellHeight-=e),o.contentHeight>n.height&&(n.height=o.contentHeight),h.contentHeight=h.getContentHeight(g,p),h.contentHeight>a&&(a=h.contentHeight),r[c.index]=h}}var v=new Ze(n.raw,-1,n.section,r,!0);v.height=a;for(var A=0,b=i.columns;A<b.length;A++){var c=b[A],h=v.cells[c.index];h&&(h.height=v.height);var o=n.cells[c.index];o&&(o.height=n.height)}return v}function sn(n,e,i,t){var r=n.pageSize().height,a=t.settings.margin,l=a.top+a.bottom,d=r-l;e.section==="body"&&(d-=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns));var c=e.getMinimumRowHeight(t.columns,n),o=c<i;if(c>d)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!o)return!1;var h=e.hasRowSpan(t.columns),f=e.getMaxCellHeight(t.columns)>d;return f?(h&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||t.settings.rowPageBreak==="avoid")}function pe(n,e,i,t,r,a,l){var d=tt(n,e,t,a);if(i.canEntireRowFit(d,l))G(n,e,i,a,l);else if(sn(n,i,d,e)){var c=on(i,d,e,n);G(n,e,i,a,l),ce(n,e,r,a,l),pe(n,e,c,t,r,a,l)}else ce(n,e,r,a,l),pe(n,e,i,t,r,a,l)}function G(n,e,i,t,r){t.x=e.settings.margin.left;for(var a=0,l=r;a<l.length;a++){var d=l[a],c=i.cells[d.index];if(!c){t.x+=d.width;continue}n.applyStyles(c.styles),c.x=t.x,c.y=t.y;var o=e.callCellHooks(n,e.hooks.willDrawCell,c,i,d,t);if(o===!1){t.x+=d.width;continue}ln(n,c,t);var h=c.getTextPos();_e(c.text,h.x,h.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,i,d,t),t.x+=d.width}t.y+=i.height}function ln(n,e,i){var t=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof t.lineWidth=="number"){var r=$e(t.lineWidth,t.fillColor);r&&n.rect(e.x,i.y,e.width,e.height,r)}else typeof t.lineWidth=="object"&&(t.fillColor&&n.rect(e.x,i.y,e.width,e.height,"F"),dn(n,e,i,t.lineWidth))}function dn(n,e,i,t){var r,a,l,d;t.top&&(r=i.x,a=i.y,l=i.x+e.width,d=i.y,t.right&&(l+=.5*t.right),t.left&&(r-=.5*t.left),c(t.top,r,a,l,d)),t.bottom&&(r=i.x,a=i.y+e.height,l=i.x+e.width,d=i.y+e.height,t.right&&(l+=.5*t.right),t.left&&(r-=.5*t.left),c(t.bottom,r,a,l,d)),t.left&&(r=i.x,a=i.y,l=i.x,d=i.y+e.height,t.top&&(a-=.5*t.top),t.bottom&&(d+=.5*t.bottom),c(t.left,r,a,l,d)),t.right&&(r=i.x+e.width,a=i.y,l=i.x+e.width,d=i.y+e.height,t.top&&(a-=.5*t.top),t.bottom&&(d+=.5*t.bottom),c(t.right,r,a,l,d));function c(o,h,f,g,p){n.getDocument().setLineWidth(o),n.getDocument().line(h,f,g,p,"S")}}function tt(n,e,i,t){var r=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&i)&&(r+=e.getFootHeight(e.columns)),n.pageSize().height-t.y-r}function ce(n,e,i,t,r,a){r===void 0&&(r=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(d){return G(n,e,d,t,r)}),e.callEndPageHooks(n,t);var l=e.settings.margin;Ve(n,e,i,t),nt(n),e.pageNumber++,t.x=l.left,t.y=l.top,i.y=l.top,e.callWillDrawPageHooks(n,t),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return G(n,e,d,t,r)}),n.applyStyles(n.userStyles))}function nt(n){var e=n.pageNumber();n.setPage(e+1);var i=n.pageNumber();return i===e?(n.addPage(),!0):!1}function cn(n){n.API.autoTable=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var t=e[0],r=Xe(this,t),a=qe(this,r);return et(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,i,t,r){_e(e,i,t,r,this)},n.API.autoTableSetDefaults=function(e){return ae.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,i){ae.setDefaults(e,i)},n.API.autoTableHtmlToJson=function(e,i){var t;if(i===void 0&&(i=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new ae(this),a=Je(r,e,window,i,!1),l=a.head,d=a.body,c=((t=l[0])===null||t===void 0?void 0:t.map(function(o){return o.content}))||[];return{columns:c,rows:d,data:d}}}var Ce;function Me(n,e){var i=Xe(n,e),t=qe(n,i);et(n,t)}try{if(typeof window<"u"&&window){var Le=window,ke=Le.jsPDF||((Ce=Le.jspdf)===null||Ce===void 0?void 0:Ce.jsPDF);ke&&cn(ke)}}catch(n){console.error("Could not apply autoTable plugin",n)}const hn=(n,e,i)=>{const t=new xt;t.setFillColor(5,10,16),t.rect(0,0,210,40,"F"),t.setTextColor(0,240,255),t.setFontSize(22),t.setFont("helvetica","bold"),t.text("TESO FINANCIAL ENGINE",15,20),t.setFontSize(10),t.setTextColor(200,200,200),t.text("CERTIFICADO DE RESILIENCIA FINANCIERA",15,30),t.setTextColor(255,255,255),t.text(`FECHA: ${new Date().toLocaleDateString()}`,160,20),t.text(`ID: ${Math.floor(Math.random()*1e5)}`,160,26),t.setTextColor(0,0,0),t.setFontSize(14),t.text("1. ESCENARIO SIMULADO (WAR ROOM)",15,55),Me(t,{startY:60,head:[["PARAMETRO","VALOR CONFIGURADO","IMPACTO"]],body:[["DÃ­as Cartera (CxC)",`${n.cxcDays} DÃ­as`,"Ciclo de Cobro"],["Frecuencia NÃ³mina (CxP)",`${n.cxpFreq} DÃ­as`,"PresiÃ³n de Caja"],["Factor Crecimiento",`${n.growth}x`,"Volumen Operativo"]],theme:"grid",headStyles:{fillColor:[50,50,50]}});const r=t.lastAutoTable.finalY+15;t.setFontSize(14),t.text("2. RESULTADO DE ESTRÃ‰S",15,r);const a=e.status==="INSOLVENT"?[239,68,68]:[5,150,105];t.setFillColor(...a),t.rect(15,r+5,180,25,"F"),t.setTextColor(255,255,255),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(`ESTADO: ${e.status}`,25,r+18),t.setFontSize(12),t.setFont("helvetica","normal"),t.text(`CASH RUNWAY: ${e.runway}`,120,r+18),t.setTextColor(0,0,0);const l=r+40;t.text("3. MÃ‰TRICAS CLAVE",15,l),Me(t,{startY:l+5,body:[["Cash Flow MÃ­nimo",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(e.minCash)],["DÃ­a de Quiebra Est.",e.insolvencyDay||"N/A"],["Margen Operativo",`${i.marginPercent}%`],["Ingresos Proyectados",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(i.totalRevenue)]],theme:"striped"}),t.setFontSize(8),t.setTextColor(100,100,100);const d=t.internal.pageSize.height;return t.text("Este documento es generado automÃ¡ticamente por la IA de Teso.",15,d-15),t.text("La validez de este certificado depende de la integridad de los datos de entrada.",15,d-10),t},fn=async(n,e,i)=>{try{await fetch("https://teso-api-dev.fly.dev/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n,action:e,details:i})}),console.log(`[AUDIT] Logged: ${e}`)}catch(t){console.warn("[AUDIT] Failed to log event",t)}},de=({variant:n="primary",size:e="md",icon:i,className:t="",children:r,style:a={},...l})=>{const d={fontFamily:"var(--font-main)",fontWeight:"bold",cursor:"pointer",border:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"var(--spacing-sm)",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"0.5px",...a},c={primary:{background:"var(--color-primary)",color:"#000",borderRadius:"var(--radius-sm)",boxShadow:"var(--shadow-glow-blue)"},danger:{background:"transparent",border:"1px solid var(--color-kpi-danger)",color:"var(--color-kpi-danger)",borderRadius:"var(--radius-lg)",boxShadow:"none"},dangerSolid:{background:"var(--color-kpi-danger)",color:"#fff",borderRadius:"var(--radius-sm)",boxShadow:"var(--shadow-glow-red)"},glass:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid var(--color-border-subtle)",color:"var(--color-text-primary)",borderRadius:"var(--radius-md)",backdropFilter:"blur(4px)"},ghost:{background:"transparent",color:"var(--color-text-secondary)",border:"none",padding:0},active:{background:"var(--color-kpi-positive)",color:"#000",borderRadius:"var(--radius-sm)"}},o={sm:{padding:"4px 10px",fontSize:"var(--text-xs)",borderRadius:n==="danger"?"var(--radius-lg)":"var(--radius-sm)"},md:{padding:"8px 16px",fontSize:"var(--text-sm)"},lg:{padding:"12px 24px",fontSize:"var(--text-md)"}},h={...d,...c[n],...o[e],...a};return s.jsxs("button",{style:h,className:`teso-btn teso-btn-${n} ${t}`,...l,children:[i&&s.jsx("span",{style:{display:"flex",alignItems:"center"},children:i}),r]})},he=6.2442,fe=-75.5812;console.log("âœ… CoreOperativo Loaded. Center:",he,fe);const gn=({p:n})=>s.jsx(be,{position:[n.lat,n.lng],icon:Et(n.heading),zIndexOffset:1e3,children:s.jsx(ze,{className:"glass-popup",children:s.jsxs("div",{style:{color:"#000"},children:[s.jsx("strong",{children:n.id}),s.jsx("br",{}),n.airline," | ",n.spd,"kts"]})})}),We=(n,e)=>{const i=["AA","AV","LA","CM","NK","IB","DL","AM"],t=["MIA","MAD","BOG","PTY","JFK","SCL","LIM","MEX"];let r,a,l,d;!n||!n.getSouth||!n.isValid()?(r=6,a=6.4,l=-75.7,d=-75.3):(r=n.getSouth(),a=n.getNorth(),l=n.getWest(),d=n.getEast());const c=e&&typeof e.lat=="number"?e:{lat:6.2442,lng:-75.5812},o=a-r,h=d-l,f=o*.8,g=h*.8,p=Math.floor(Math.random()*4);let v,A;p===0?(v=a+f,A=l+Math.random()*h):p===1?(v=r-f,A=l+Math.random()*h):p===2?(v=r+Math.random()*o,A=l-g):(v=r+Math.random()*o,A=d+g);const b=c.lat+(Math.random()-.5)*(o*.3),j=c.lng+(Math.random()-.5)*(h*.3),H=Math.atan2(j-A,b-v)*(180/Math.PI),k=o*2e-4+Math.random()*(o*1e-4);return{id:`${i[Math.floor(Math.random()*i.length)]}${Math.floor(100+Math.random()*900)}`,airline:i[Math.floor(Math.random()*i.length)],from:t[Math.floor(Math.random()*t.length)],lat:v,lng:A,heading:H,speed:k,alt:1e4+Math.floor(Math.random()*5e3),spd:300+Math.floor(Math.random()*200)}},pn=({setPlanes:n})=>{const e=wt();return m.useEffect(()=>{if(!e)return;const t=setInterval(()=>{try{if(!e||!e._leaflet_id)return;const r=e.getBounds(),a=e.getCenter(),l=r.pad(2);n(d=>{let c=[...d];if(c.length<6)for(;c.length<6;)console.log("âœˆï¸ Spawning New Plane..."),c.push(We(r,a));return c.map(o=>{const h=o.lat+Math.cos(o.heading*Math.PI/180)*o.speed,f=o.lng+Math.sin(o.heading*Math.PI/180)*o.speed;return l.contains([h,f])?{...o,lat:h,lng:f}:We(r,a)})})}catch{}},100);return()=>clearInterval(t)},[e,n]),null};function un({onClose:n,onHome:e,command:i,simulationData:t,activeLayers:r}){const[a,l]=m.useState([]),[d,c]=m.useState([]),[o,h]=m.useState([]);return m.useEffect(()=>{if(t&&t.services){const g=t.services.slice(0,15).map((p,v)=>({id:p.plate||`V-0${v+10}`,lat:p.lat||he+(Math.random()-.5)*.05,lng:p.lng||fe+(Math.random()-.5)*.05,status:p.status==="COMPLETED"?"ACTIVE":"IDLE",speed:Math.floor(Math.random()*60)+20,target:null,driver:p.driver_name}));l(g)}else l(Array.from({length:15}).map((f,g)=>({id:`V-0${g+10}`,lat:he+(Math.random()-.5)*.06,lng:fe+(Math.random()-.5)*.06,status:"ACTIVE",speed:30})))},[t]),m.useEffect(()=>{},[i]),m.useEffect(()=>{const f=setInterval(()=>{l(g=>g.map(p=>p.status==="ACTIVE"||p.status==="DISPATCHED"?{...p,lat:p.lat+(Math.random()-.5)*.0015,lng:p.lng+(Math.random()-.5)*.0015,speed:Math.max(20,Math.floor(Math.random()*70))}:p))},1e3);return()=>clearInterval(f)},[]),m.useEffect(()=>{console.log("âœˆï¸ [CoreOperativo] Active Planes:",o.length),o.length>0&&console.log("âœˆï¸ [CoreOperativo] Sample Plane:",o[0])},[o]),s.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:s.jsxs(mt,{center:[he,fe],zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,attributionControl:!1,children:[s.jsx(St,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"Â© CARTO",opacity:1}),s.jsx(pn,{setPlanes:h}),(!r||r.includes("FLEET"))&&a.map(f=>s.jsx(be,{position:[f.lat,f.lng],icon:Ct,children:s.jsx(ze,{children:s.jsx("strong",{children:f.id})})},f.id)),(!r||r.includes("JOBS"))&&d.map(f=>s.jsx(be,{position:[f.lat,f.lng],icon:bt},f.id)),o.map(f=>s.jsx(gn,{p:f,isSelected:!1},f.id))]})})}function it({activeTab:n,onTabChange:e}){const i=[{id:"FLOTA",icon:"ðŸš™",label:"FLOTA"},{id:"ORDENES",icon:"ðŸ“¦",label:"ORDENES"},{id:"VUELOS",icon:"âœˆï¸",label:"VUELOS"},{id:"CLIENTES",icon:"ðŸ¢",label:"CLIENTES"},{id:"AGENDA",icon:"ðŸ“…",label:"AGENDA"},{id:"FINANZAS",icon:"ðŸ’°",label:"FINANZAS"},{id:"MERCADO",icon:"ðŸ“¢",label:"MERCADO"},{id:"CORE_V4",icon:"ðŸ”‹",label:"CORE v4.8 LIVE"},{id:"ARTEFACTO",icon:"ðŸ§¬",label:"LHU ARTEFACT"}];return s.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px",padding:"10px"},children:i.map(t=>s.jsxs("button",{onClick:()=>e(t.id),style:{background:n===t.id?"rgba(6, 182, 212, 0.15)":"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(4px)",border:n===t.id?"1px solid #06b6d4":"1px solid rgba(255, 255, 255, 0.1)",color:n===t.id?"#22d3ee":"#94a3b8",padding:"8px 16px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"bold",transition:"all 0.2s",boxShadow:n===t.id?"0 0 15px rgba(6, 182, 212, 0.3)":"inset 0 0 10px rgba(0,0,0,0.2)"},children:[s.jsx("span",{children:t.icon}),s.jsx("span",{children:t.label})]},t.id))})}const vn=Be.lazy(()=>Dt(()=>import("./GeminiConsultantArtifact.BM-3OUua.js"),__vite__mapDeps([0,1,2]))),yn=({activeLayers:n,onToggle:e})=>{const i=t=>{if(t.id==="C_GIT")return window.open("https://github.com/GuillermoHoyos/teso_core","_blank");if(t.id==="PITCH")return window.dispatchEvent(new Event("SHOW_PITCH"));if(t.id==="WHATSAPP")return window.open("https://wa.me/573001234567?text=Hola%20TESO%20AI","_blank");e(t.id)};return s.jsx("div",{style:{position:"absolute",top:"75px",left:"20px",bottom:"100px",display:"flex",flexDirection:"column",gap:"8px",zIndex:400,overflowY:"auto",scrollbarWidth:"none"},children:[{id:"RADAR",label:"RADAR JMC",icon:"ðŸ“¡",color:"#a855f7"},{id:"VISION",label:"VISIÃ“N IA",icon:"ðŸ§ ",color:"#ec4899"},{id:"OPTIMIZE",label:"OPTIMIZE",icon:"ðŸ“ˆ",color:"#f59e0b"},{id:"JOBS",label:"PEDIDOS",icon:"ðŸ”¥",color:"#ef4444"},{id:"FLEET",label:"FLOTA V4",icon:"ðŸš™",color:"#39FF14"},{id:"PITCH",label:"PITCH DECK",icon:"ðŸ“¢",color:"#ec4899"},{id:"WHATSAPP",label:"WHATSAPP",icon:"ðŸ’¬",color:"#22c55e"},{id:"C_GIT",label:"SOURCE GIT",icon:"ðŸ‘¾",color:"#64748b"}].map((t,r)=>{const a=n.includes(t.id);return s.jsxs("div",{onClick:()=>i(t),style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",opacity:a||["PITCH","WHATSAPP","C_GIT"].includes(t.id)?1:.5,transition:"opacity 0.2s"},children:[s.jsx("div",{style:{width:"40px",height:"40px",background:a?`rgba(${parseInt(t.color.slice(1,3),16)}, ${parseInt(t.color.slice(3,5),16)}, ${parseInt(t.color.slice(5,7),16)}, 0.2)`:"rgba(15, 23, 42, 0.9)",border:`1px solid ${t.color}`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",boxShadow:a?`0 0 15px ${t.color}`:"none"},children:t.icon}),s.jsx("div",{style:{color:"#fff",fontSize:"0.7rem",fontWeight:"bold",letterSpacing:"1px",textShadow:"0 2px 4px #000",fontFamily:"monospace"},children:t.label})]},r)})})},xn=({simulationData:n})=>{const[e,i]=m.useState(null);return m.useEffect(()=>{const t=async()=>{try{const d=await(await fetch("https://teso-api-dev.fly.dev/api/strategic-cycle",{method:"POST"})).json();i(d)}catch(a){console.error("Agent Poll Failed",a)}},r=setInterval(t,1e4);return t(),()=>clearInterval(r)},[]),s.jsxs("div",{style:{width:"350px",background:"rgba(9, 9, 11, 0.95)",borderLeft:"1px solid #334155",display:"flex",flexDirection:"column",padding:"20px",zIndex:50,boxShadow:"-10px 0 40px rgba(0,0,0,0.8)",height:"100%",overflowY:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,color:"#ef4444",fontFamily:"monospace",fontSize:"1.2rem"},children:"TESO OPS"}),s.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b"},children:["UNIDADES: ",n?.services?.length||15," | OPS ACTIVAS: ",n?.services?.filter(t=>t.status!=="COMPLETED").length||60]})]}),s.jsx("div",{style:{width:"30px",height:"30px",borderRadius:"50%",border:"1px solid #ea580c",display:"flex",alignItems:"center",justifyContent:"center",color:"#ea580c",cursor:"pointer"},children:"ðŸ "})]}),e&&s.jsxs("div",{style:{marginBottom:"20px",border:"1px solid #334155",borderRadius:"8px",padding:"10px",background:"rgba(15, 23, 42, 0.5)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[s.jsx("div",{style:{color:"#94a3b8",fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase"},children:"ðŸ›¡ï¸ AUTONOMOUS GUARDRAILS"}),s.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#22c55e",boxShadow:"0 0 5px #22c55e"}})]}),s.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:"rgba(239, 68, 68, 0.1)",borderLeft:"3px solid #ef4444",borderRadius:"0 4px 4px 0"},children:[s.jsx("div",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"0.8rem"},children:"CEO DIRECTIVE:"}),s.jsx("div",{style:{color:"#fff",fontSize:"0.9rem",fontWeight:"bold"},children:e.strategic_alignment?.directive||"ANALYZING..."}),s.jsxs("div",{style:{color:"#94a3b8",fontSize:"0.7rem",marginTop:"4px",fontStyle:"italic"},children:['"',e.strategic_alignment?.reasoning,'"']})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"5px"},children:["finance","ops","design"].map(t=>{const r=t==="finance"?e.department_reports?.finance?.executive_summary?.score:t==="ops"?100:e.department_reports?.design_input?.design_audit?.score,a=t==="finance"?"FIN":t==="ops"?"OPS":"UX",l=t==="finance"?"ðŸ’°":t==="ops"?"ðŸšš":"ðŸŽ¨";return s.jsxs("div",{style:{background:"#020617",padding:"8px",borderRadius:"4px",textAlign:"center",border:"1px solid #1e293b"},children:[s.jsx("div",{style:{fontSize:"1.2rem"},children:l}),s.jsxs("div",{style:{fontSize:"0.6rem",fontWeight:"bold",marginTop:"2px",color:(r||0)<70?"#ef4444":"#22c55e"},children:[a," ",r||"ON","%"]})]},t)})})]}),s.jsxs("div",{style:{marginBottom:"20px",position:"relative"},children:[s.jsx("input",{type:"text",placeholder:"Buscar Orden, Unidad, Cliente [ENTER]",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:"4px",padding:"8px 10px",color:"#fff",fontSize:"0.8rem",outline:"none"}}),s.jsx("span",{style:{position:"absolute",right:"10px",top:"8px",color:"#64748b"},children:"ðŸ”"})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"20px"},children:[s.jsx("button",{style:{background:"rgba(6, 182, 212, 0.1)",border:"1px solid #06b6d4",color:"#06b6d4",padding:"10px",borderRadius:"4px",fontWeight:"bold",fontSize:"0.8rem"},children:"â–¶ INICIAR SIMULACIÃ“N"}),s.jsx("button",{style:{background:"rgba(234, 88, 12, 0.1)",border:"1px solid #ea580c",color:"#ea580c",padding:"10px",borderRadius:"4px",fontWeight:"bold",fontSize:"0.8rem"},children:"âš¡ DESPACHO INTELIGENTE"})]}),s.jsxs("div",{id:"teso-console-log",style:{background:"#000",border:"1px solid #1e293b",borderRadius:"4px",padding:"10px",marginBottom:"20px",height:"120px",overflowY:"auto",fontFamily:"monospace",fontSize:"0.7rem"},children:[s.jsx("div",{style:{color:"#06b6d4",fontWeight:"bold",marginBottom:"5px"},children:"CONSOLE.LOG :: SYSTEM EVENTS"}),s.jsxs("div",{style:{color:"#39FF14"},children:["[",new Date().toLocaleTimeString(),"] ðŸŸ© CORE v4.8 (STABLE UI) ONLINE"]}),s.jsxs("div",{style:{color:"#fff"},children:["[",new Date().toLocaleTimeString(),"] â˜ï¸ CONNECTING: Syncing with VORTEX Node..."]}),s.jsxs("div",{style:{color:"#facc15"},children:["[",new Date().toLocaleTimeString(),"] âš ï¸ DEBUG MODE: RADAR FORCED ON"]})]}),s.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[s.jsx("div",{style:{color:"#64748b",fontSize:"0.8rem",fontWeight:"bold",marginBottom:"10px",borderBottom:"1px solid #334155",paddingBottom:"5px"},children:"UNIDADES EN LÃNEA"}),n?.services?.slice(0,10).map((t,r)=>s.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"8px",marginBottom:"5px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{color:"#fff",fontSize:"0.8rem"},children:t.plate}),s.jsx("div",{style:{color:"#39FF14",fontSize:"0.7rem"},children:t.status})]},r))]})]})},mn=({opsCommand:n,simulationData:e,planes:i})=>{const[t,r]=m.useState("FLOTA"),[a,l]=m.useState(["FLEET","JOBS","RADAR"]),[d,c]=m.useState(!1),[o,h]=m.useState(!0),f=g=>{l(p=>p.includes(g)?p.filter(v=>v!==g):[...p,g])};return s.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden",background:"#000"},children:[s.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1},children:[t!=="ORDENES"&&t!=="CLIENTES"&&t!=="ARTEFACTO"&&s.jsx(un,{command:n,simulationData:e,activeLayers:a,planes:i}),t==="CLIENTES"&&s.jsx(At,{}),t==="ARTEFACTO"&&s.jsx(Be.Suspense,{fallback:s.jsx("div",{children:"Cargando..."}),children:s.jsx(vn,{onClose:()=>r("FLOTA")})})]}),s.jsx("div",{style:{position:"absolute",top:5,left:60,zIndex:1e3},children:s.jsx(it,{activeTab:t,onTabChange:r})}),s.jsx(yn,{activeLayers:a,onToggle:f}),(t==="FLOTA"||t==="VUELOS"||t==="AGENDA")&&s.jsxs("div",{style:{position:"absolute",top:0,right:0,height:"100%",width:o?"350px":"0px",zIndex:500,transition:"width 0.3s ease-in-out",display:"flex"},children:[s.jsx("div",{onClick:()=>h(!o),style:{position:"absolute",left:"-30px",top:"50%",width:"30px",height:"60px",background:"rgba(9, 9, 11, 0.9)",border:"1px solid #334155",borderRadius:"8px 0 0 8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#06b6d4",zIndex:501},children:o?"â–¶":"â—€"}),s.jsx("div",{style:{width:"350px",height:"100%",transform:o?"translateX(0)":"translateX(350px)",transition:"transform 0.3s"},children:s.jsx(xn,{simulationData:e})})]}),s.jsxs("div",{onClick:()=>c(!d),style:{position:"absolute",bottom:"20px",left:"20px",zIndex:1e3,display:"flex",alignItems:"center",gap:"10px",background:"rgba(15, 23, 42, 0.95)",border:"1px solid #06b6d4",borderRadius:"50px",padding:"10px 25px",cursor:"pointer"},children:[s.jsx("div",{style:{fontSize:"1.5rem"},children:"ðŸ¤–"}),d&&s.jsx("div",{style:{color:"#fff",fontSize:"0.9rem",fontWeight:"bold"},children:"CONSULTOR IA"})]}),d&&s.jsxs("div",{style:{position:"absolute",bottom:"80px",left:"20px",width:"350px",background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(10px)",border:"1px solid #334155",borderRadius:"16px",padding:"15px",zIndex:2e3},children:[s.jsx("div",{style:{color:"#94a3b8",marginBottom:"10px"},children:"Panel de Inteligencia Activo"}),["Analizar SituaciÃ³n Financiera","Optimizar Rutas","Recomendar Agentes"].map(g=>s.jsxs("div",{onClick:()=>{console.log(`ðŸ¤– AI AGENT ACTIVATED: ${g}`);const p=document.getElementById("teso-console-log");if(p){const v=document.createElement("div");v.style.color="#06b6d4",v.innerText=`[${new Date().toLocaleTimeString()}] ðŸ¤– EXECUTING: ${g}...`,p.appendChild(v),p.scrollTop=p.scrollHeight}},style:{padding:"8px",borderBottom:"1px solid #333",cursor:"pointer",color:"#fff"},children:["â€¢ ",g]},g))]})]})},W={provider:"NATIVE",params:{elevenKey:localStorage.getItem("ELEVEN_API_KEY")||"",voiceId:"ErXwobaYiN019PkySvjV",stability:.5,similarity_boost:.75},isMuted:!1,queue:[]};class Sn{constructor(){this.synth=window.speechSynthesis,this.audioContext=new(window.AudioContext||window.webkitAudioContext)}configure(e,i=null){W.provider=e,i&&(W.params.elevenKey=i,localStorage.setItem("ELEVEN_API_KEY",i))}async speak(e,i="INFO"){W.isMuted||(console.log(`ðŸŽ™ï¸ [${W.provider}] Speaking:`,e),W.provider==="ELEVEN_LABS"&&W.params.elevenKey?await this.speakElevenLabs(e):this.speakNative(e,i))}speakNative(e,i){this.synth.cancel();let t=1,r=1,a=e;(e.includes("[rapid-fire]")||e.includes("[urgent]"))&&(t=1.5),e.includes("[rushed]")&&(t=1.3),(e.includes("[slow down]")||e.includes("[deliberate]"))&&(t=.85),(e.includes("[happy]")||e.includes("[excited]"))&&(r=1.2),(e.includes("[sad]")||e.includes("[calm]"))&&(r=.9),e.includes("[nervous]")&&(t=1.2,r=1.3),e.includes("[robotic]")&&(t=.9,r=.5),a=a.replace(/\[.*?\]/g,"").trim();const l=new SpeechSynthesisUtterance(a),c=this.synth.getVoices().find(o=>o.lang.includes("es")&&(o.name.includes("Google")||o.name.includes("Premium")));c&&(l.voice=c),l.rate=t,l.pitch=r,this.synth.speak(l)}async speakElevenLabs(e){try{const i=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${W.params.voiceId}`,{method:"POST",headers:{"Content-Type":"application/json","xi-api-key":W.params.elevenKey},body:JSON.stringify({text:e,model_id:"eleven_multilingual_v2",voice_settings:{stability:W.params.stability,similarity_boost:W.params.similarity_boost}})});if(!i.ok)throw new Error("ElevenLabs API Error");const t=await i.arrayBuffer(),r=await this.audioContext.decodeAudioData(t),a=this.audioContext.createBufferSource();a.buffer=r,a.connect(this.audioContext.destination),a.start(0)}catch(i){console.warn("âš ï¸ ElevenLabs Failed, falling back to Native:",i),this.speakNative(e,"INFO")}}stop(){this.synth.cancel()}toggleMute(){return W.isMuted=!W.isMuted,W.isMuted}formatText(e,i="neutral"){const r={angry:"[angry]",calm:"[calm]",curious:"[curious]",excited:"[excited]",happy:"[happy]",nervous:"[nervous]",sad:"[sad]",serious:"[understated]",urgent:"[rapid-fire]",announcement:"[loudly]",whisper:"[whispering]",robotic:"[robotic]",professional:"[deliberate]",sigh:"[sighs]",laugh:"[laughs]",breath:"[breathes]"}[i]||"";return r?`${r} ${e}`:e}}const He=new Sn,Cn="/documents/invoices/invoice_sier_service.pdf",bn="/documents/invoices/invoice_viajes_az.pdf",wn="/documents/invoices/invoice_personal_soft.pdf",zn=({vehicles:n,requests:e,planes:i,initialViewMode:t="LIVE_OPS",onRowClick:r,simulationData:a,onClose:l,onHome:d,onRegenerate:c,onSimulateStress:o,onRunMacro:h})=>{const[f,g]=m.useState(a||null),[p,v]=m.useState(!1),[A,b]=m.useState(null),[j,H]=m.useState(!0),[k,X]=m.useState(null),V=(u,C="professional")=>{if(!j)return;const y=/^\s*\[.*\]/.test(u)?u:He.formatText(u,C),E=u.includes("[urgent]")||u.includes("[angry]")||C==="urgent"?"CRITICAL":"INFO";He.speak(y,E)};m.useEffect(()=>{if(!a||!a.details)return;let u=null;a.details?.agent_analysis?.voice_script?u=a.details.agent_analysis.voice_script:a.analysis?.voice_script&&(u=a.analysis.voice_script),u&&(console.log("ðŸ—£ï¸ AGENT SPEAKING:",u),V(u))},[a]),m.useEffect(()=>{const u={current:null},w=setInterval(async()=>{try{const y=await fetch("https://teso-api-dev.fly.dev/api/agently/alerts");if(!y.ok)return;const N=await y.json();if(N.length>0){const E=N[0];if(E.timestamp!==u.current&&(u.current=E.timestamp,console.log("ðŸš¨ NEW AUTONOMOUS ALERT:",E),E.data&&E.data.analysis)){const P=`Alerta AutÃ³noma. ${E.data.analysis.message}`;V(P)}}}catch{}},3e4);return()=>clearInterval(w)},[]),m.useEffect(()=>{a&&(console.log("ðŸ”„ DASHBOARD: Syncing with Parent Data...",a.services?.length),g(a))},[a]);const[Z,rt]=m.useState(null),[Q,Ae]=m.useState(!1),Te=async()=>{Ae(!0);try{const u=await fetch("/api/strategic-cycle",{method:"POST"});if(u.ok){const C=await u.json();rt(C),C.voice_broadcast&&V(C.voice_broadcast.text)}}catch(u){console.error("CEO Brain Offline:",u)}finally{Ae(!1)}},at=async()=>{V("Iniciando AuditorÃ­a Profunda con Agente Financiero...");try{const u=await fetch("/api/decisions/financial-audit",{method:"POST",headers:{"Content-Type":"application/json"}});if(!u.ok){const N=await u.text();throw new Error(`Server Error (${u.status}): ${N}`)}const C=await await u.json();console.log("AUDIT RESULT:",C);const w=C.score||0,y=C.verdict||"Desconocido";V(`AuditorÃ­a Finalizada. Score: ${w}. Veredicto: ${y}`),alert(`âœ… AUDITORÃA COMPLETADA

Score: ${w}/100
Veredicto: ${y}

(Vea el log para mÃ¡s detalles)`)}catch(u){console.error("Audit Failed",u),V("Error crÃ­tico conectando con el Agente Financiero."),alert(`âŒ ERROR DE CONEXIÃ“N:
${u.message}

Verifique que el Backend Python estÃ© corriendo.`)}};m.useEffect(()=>{if(f&&!Z){const u=setTimeout(Te,2e3);return()=>clearTimeout(u)}},[f]),m.useEffect(()=>{if(f)return;(async()=>{console.log("ðŸ“¡ CONNECTING TO TESO OPS V4..."),v(!0);try{const w=await fetch("/api/simulate/core-v4",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cars:15,avg_trips_per_day:40,days:360})});if(!w.ok)throw new Error("Ops Engine Offline");const y=await w.json();console.log("âœ… OPS CONNECTED:",y);const N=y.operational?.annual_trips||14400,E=y.operational?.cars||15,P=new Array(N),O=new Date;O.setDate(O.getDate()-360);for(let T=0;T<N;T++){const I=T%E+1,B=Math.floor(T/40),_=new Date(O);_.setDate(_.getDate()+B),P[T]={id:`TRIP-${T}`,date:_.toISOString(),lat:6.24+(Math.random()*.08-.04),lng:-75.58+(Math.random()*.08-.04),status:"COMPLETED",financials:{totalValue:125e3,driverPayment:82e3,netRevenue:25e3},plate:`TES-${100+I}`,driver_name:`Cond. ${I}`}}const F=P.filter((T,I)=>I%10===0).map(T=>({date:T.date,amount:25e3,type:"INCOME",description:"ComisiÃ³n Teso Ops"})),Y=Array.from({length:8}).map((T,I)=>({id:`FL-${500+I}`,lat:6.24+(Math.random()*.1-.05),lng:-75.58+(Math.random()*.1-.05),heading:Math.floor(Math.random()*360),alt:8e3+Math.floor(Math.random()*5e3),spd:240+Math.floor(Math.random()*40),status:Math.random()>.3?"AIRBORNE":"LANDED",from:["MIA","BOG","CLO","JFK","MAD"][Math.floor(Math.random()*5)]}));g({...y,services:P,planes:Y,bankTransactions:F})}catch(C){console.error("âŒ OPS ERROR:",C),b(C.message)}finally{v(!1)}})()},[]);const[oe,ot]=m.useState(t),[ne,st]=m.useState("PROGRAMACION"),[ve,lt]=m.useState(!1),[En,Dn]=m.useState(null),[R,An]=m.useState("Today"),[Tn,In]=m.useState(!1),[jn,Rn]=m.useState(!1),[M,ye]=m.useState({cxcDays:30,cxpFreq:15,growth:1}),[z,dt]=m.useState({status:"STABLE",minCash:0,insolvencyDay:null,runway:"âˆž"});m.useEffect(()=>{let u=[...e||[],...f?.services||[]];if(u.length===0)return;const w=(()=>{const x=new Date;return x.setHours(0,0,0,0),R==="Today"?(x.setDate(x.getDate()-1),x):R==="30D"?(x.setDate(x.getDate()-30),x):R==="90D"?(x.setDate(x.getDate()-90),x):R==="180D"?(x.setDate(x.getDate()-180),x):R==="360D"?(x.setDate(x.getDate()-360),x):new Date("2020-01-01")})();R!=="ALL"&&(u=u.filter(x=>new Date(x.date||0)>=w));const y=[],N=8e8,E=u.map(x=>new Date(x.date).getTime()),P=new Date(Math.min(...E)),O=new Date(Math.max(...E)),F=new Date(O);F.setDate(F.getDate()+parseInt(M.cxcDays)+15),u.forEach(x=>{if(x.status==="CANCELLED")return;const L=new Date(x.date);L.setDate(L.getDate()+parseInt(M.cxcDays)),y.push({date:L,amount:(x.financials?.totalValue||0)*parseFloat(M.growth),type:"INFLOW"})}),u.forEach(x=>{if(x.status==="CANCELLED")return;const L=new Date(x.date),te=L.getDate();let J=Math.ceil(te/M.cxpFreq)*M.cxpFreq;J>30&&(J=30);const le=new Date(L);te>J?(le.setMonth(le.getMonth()+1),le.setDate(M.cxpFreq)):le.setDate(J),y.push({date:le,amount:-((x.financials?.driverPayment||0)*parseFloat(M.growth)),type:"OUTFLOW"})});const Y=[{desc:"INFRAESTRUCTURA AWS",amount:25e5,day:5},{desc:"OFICINA & ADMIN",amount:45e5,day:1},{desc:"NOMINA SOPORTE (Q1)",amount:6e6,day:15},{desc:"NOMINA SOPORTE (Q2)",amount:6e6,day:30}];let T=new Date(P);for(;T<=F;){const x=T.getMonth(),L=T.getFullYear();Y.forEach(te=>{const J=new Date(L,x,te.day);J>=P&&J<=F&&y.push({date:J,amount:-te.amount,type:"FIXED_COST"})}),T.setMonth(T.getMonth()+1)}y.sort((x,L)=>x.date-L.date);let I=N,B=N,_=N,q=null;const ie=[];for(let x of y)I+=x.amount,I<B&&(B=I),I>_&&(_=I),I<0&&!q&&(q=x.date.toLocaleDateString()),ie.push(I);const K=ie.length,S=Math.max(_-B,1e6),D=x=>90-(x-B)/S*80;let ee=`M 0 ${D(N)}`;const re=Math.ceil(K/200);for(let x=0;x<K;x+=re){const L=x/K*100,te=D(ie[x]);ee+=` L ${L} ${te}`}dt({status:B<0?"INSOLVENT":"SUSTAINABLE",minCash:B,insolvencyDay:q,runway:q?`${Math.floor((new Date(q)-new Date)/(1e3*60*60*24))} Days`:"âˆž",graphPath:ee,duration:Math.floor(K/(u.length/y.length||1)),simDays:Math.ceil(K/(y.length/K))})},[f,M,R]),m.useEffect(()=>{t&&ot(t)},[t]);const[Ie,Pn]=m.useState({efficiency:94,avgResponse:12,errorRate:0}),[$,ct]=m.useState({totalRevenue:0,totalCost:0,margin:0,marginPercent:0,cxcPending:0,cxpPending:0,topClients:[]}),[On,Nn]=m.useState(""),[Fn,ht]=m.useState([]),ft=()=>{if(!z)return;hn(M,z,$).save(`TESO_CERTIFICADO_RESILIENCIA_${new Date().toISOString().slice(0,10)}.pdf`),fn("Director Financiero","DOWNLOAD_STRESS_CERTIFICATE",{scenario:M,result:z.status})};m.useEffect(()=>{const C=(()=>{const S=new Date;if(R==="Today")return new Date(S.setDate(S.getDate()-1));const D=new Date;if(R==="7D")return new Date(D.setDate(D.getDate()-7));const ee=new Date;if(R==="30D")return new Date(ee.setDate(ee.getDate()-30));const re=new Date;return R==="90D"?new Date(re.setDate(re.getDate()-90)):new Date("2020-01-01")})(),w=S=>S.date?new Date(S.date)>=C:!0,y=[...e||[],...f?.services||[]],N=f?.bankTransactions||[],E=R==="ALL"?y:y.filter(w),P=R==="ALL"?N:N.filter(w);let O=0,F=0,Y=0,T=0;const I={};E.forEach(S=>{const D=S.financials?.totalValue||parseFloat((S.fare||"0").replace(/[^0-9]/g,""))||0,ee=S.financials?.totalCost||D*.8,re=S.financials?.driverPayment||D*.6;if(O+=D,F+=ee,S.status!=="CANCELLED"){Y+=D,T+=re;const x=S.company||S.paxName||f?.clients?.find(L=>L.id===S.clientId)?.companyName||"PARTICULAR";I[x]||(I[x]=0),I[x]+=D}});const B=O-F,_=P.filter(S=>S.type==="INCOME").reduce((S,D)=>S+D.amount,0),q=Y-_;P.filter(S=>S.type==="EXPENSE"&&(S.description?.includes("NÃ“MINA")||S.description?.includes("PAGO"))).reduce((S,D)=>S+Math.abs(D.amount||0),0);const ie=Object.entries(I).map(([S,D])=>({name:S,volume:D,balance:D,status:D>5e6?"VIP PLATINUM":"CORPORATE"})).sort((S,D)=>D.volume-S.volume).slice(0,15);ct({totalRevenue:O,totalCost:F,margin:B,marginPercent:O>0?(B/O*100).toFixed(1):0,cxcPending:q,cxpPending:T,topClients:ie});const K=ie.map((S,D)=>({id:`CORP-${100+D}`,name:S.name,currentCycleServices:Math.floor(S.volume/85e3),cycleStatus:S.volume>5e6?"CUTOFF READY":"ACCUMULATING",lastInvoice:`FE-${9e3+D}`,pdf:D<3?[Cn,bn,wn][D]:null}));ht(K)},[e,f,R]);const gt=u=>{if(!u)return new Date(0);if(u==="Hoy")return new Date;if(u==="MaÃ±ana"){const w=new Date;return w.setDate(w.getDate()+1),w}if(u==="Pasado MaÃ±ana"){const w=new Date;return w.setDate(w.getDate()+2),w}const C=new Date(u);return isNaN(C.getTime())?(console.warn("Invalid Date encountered:",u),new Date(0)):C};(()=>{const u=[...e||[],...f?.services||[]];if(R==="ALL")return u.length;const w=(()=>{const y=new Date;return y.setHours(0,0,0,0),R==="Today"?(y.setDate(y.getDate()-1),y):R==="7D"?(y.setDate(y.getDate()-7),y):R==="30D"?(y.setDate(y.getDate()-30),y):R==="90D"?(y.setDate(y.getDate()-90),y):R==="180D"?(y.setDate(y.getDate()-180),y):new Date("2020-01-01")})();return u.filter(y=>gt(y.date)>=w).length})();const[Ln,kn]=m.useState(null),pt=()=>!Z&&!Q?null:s.jsxs("div",{style:{margin:"20px",background:"linear-gradient(135deg, #1e1b4b 0%, #312e81 100%)",border:"1px solid #6366f1",borderRadius:"8px",padding:"20px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.5)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[s.jsx("div",{style:{fontSize:"2rem",background:"#fff",borderRadius:"50%",width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center"},children:"ðŸ‘”"}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"0.8rem",color:"#a5b4fc",fontWeight:"bold"},children:"VORTEX STRATEGIC ORCHESTRATOR"}),s.jsx("div",{style:{fontSize:"1.2rem",color:"#fff",fontWeight:"900"},children:Q?"ANALIZANDO ESTRATEGIA GLOBAL...":"DIRECTIVA EJECUTIVA VIGENTE"})]})]}),s.jsx("div",{children:s.jsx("button",{onClick:Te,disabled:Q,style:{background:Q?"#4338ca":"#4f46e5",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"6px",fontWeight:"bold",cursor:Q?"wait":"pointer"},children:Q?"â³ CALCULANDO...":"ðŸ”„ RE-EVALUAR ESTRATEGIA"})})]}),Z&&!Q&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"20px"},children:[s.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"15px",borderRadius:"6px"},children:[s.jsx("div",{style:{color:"#818cf8",fontSize:"0.75rem",marginBottom:"5px"},children:"DECISIÃ“N DEL CEO"}),s.jsx("div",{style:{color:"#fff",fontSize:"1.4rem",fontWeight:"bold",marginBottom:"10px"},children:Z.strategic_alignment.directive.replace(/_/g," ")}),s.jsxs("div",{style:{color:"#c7d2fe",fontSize:"0.9rem",fontStyle:"italic"},children:['"',Z.strategic_alignment.reasoning,'"']})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[s.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"4px",borderLeft:"3px solid #34d399"},children:[s.jsx("div",{style:{fontSize:"0.7rem",color:"#aaa"},children:"CFO (FINANZAS)"}),s.jsxs("div",{style:{fontWeight:"bold",color:"#fff"},children:["Score: ",Z.department_reports?.finance?.executive_summary?.score||0,"/100"]})]}),s.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"4px",borderLeft:"3px solid #fbbf24"},children:[s.jsx("div",{style:{fontSize:"0.7rem",color:"#aaa"},children:"COO (LOGÃSTICA)"}),s.jsxs("div",{style:{fontWeight:"bold",color:"#fff"},children:["Status: ",Z.department_reports?.operations?.dispatch_summary?.status||"N/A"]})]})]})]})]}),[ut,vt]=m.useState({activeOrderId:null,stepIndex:-1,nodes:[{id:"MARKET",icon:"ðŸ“¡",label:"MARKET SENSOR",role:"Demand & IO Handler",status:"SCANNING",load:30,logs:["Listening..."]},{id:"PRICING",icon:"ðŸ§ ",label:"PRICING CORE",role:"Dynamic Calc / Fixed Routes",status:"IDLE",load:0,logs:[]},{id:"FINANCE",icon:"ðŸ›¡ï¸",label:"PAYMENT GUARDIAN",role:"Pre-Service Fund Capture",status:"IDLE",load:0,logs:[]},{id:"COMPLIANCE",icon:"âš–ï¸",label:"LEGAL CHECK",role:"RNT/SOAT Validation",status:"IDLE",load:0,logs:[]},{id:"DISPATCH",icon:"ðŸš€",label:"OPS SENTINEL",role:"Assignment & Routing",status:"IDLE",load:0,logs:[]}]}),[yt,je]=m.useState([{time:"10:42:01",msg:"System stable. Orchestrator: ONLINE."}]);m.useEffect(()=>{const u=setInterval(()=>{vt(C=>{let{activeOrderId:w,stepIndex:y,nodes:N}=C;const E=[...N];if(w===null&&Math.random()>.7){const P=`ORD-${Math.floor(Math.random()*9e3)+1e3}`;return{...C,activeOrderId:P,stepIndex:0,nodes:E.map((O,F)=>F===0?{...O,status:"PROCESSING",load:80,logs:[`New Request: ${P}`]}:O)}}if(w){const P=E[y];if(P.load>0)E[y]={...P,load:Math.max(0,P.load-25)};else{E[y]={...P,status:"DONE",logs:["Completed."]};const O=y+1;if(O<E.length){const F=E[O],Y=[["Calculating Tariff..."],["Capturing Funds..."],["Verifying Driver Docs..."],["Dispatching Unit..."]],T=["ðŸ“¡ MARKET -> ðŸ§  PRICING: Request Data { dist: 12km, pax: 'VIP' }","ðŸ§  PRICING -> ðŸ›¡ï¸ FINANCE: Quote Locked $45.000 (Pre-Paid).","ðŸ›¡ï¸ FINANCE -> âš–ï¸ COMPLIANCE: Funds Secured (Tx#99). Verify Asset.","âš–ï¸ COMPLIANCE -> ðŸš€ DISPATCH: Legal Check Passed. Auth to Dispatch."];return T[y]&&je(I=>[{time:new Date().toLocaleTimeString("es-CO",{hour12:!1}),msg:T[y],type:"HANDSHAKE"},...I.slice(0,9)]),E[O]={...F,status:"WORKING",load:100,logs:Y[y]||["Processing..."]},{...C,stepIndex:O,nodes:E}}else return je(F=>[{time:new Date().toLocaleTimeString("es-CO",{hour12:!1}),msg:`âœ… ORCHESTRATION COMPLETE: ${w} Dispatched w/ Zero Friction.`},...F.slice(0,8)]),{...C,activeOrderId:null,stepIndex:-1,nodes:E.map(F=>({...F,status:"IDLE",load:0,logs:[]}))}}}return w||(E[0]={...E[0],status:"SCANNING",load:30+Math.random()*10}),{...C,nodes:E}})},800);return()=>clearInterval(u)},[]);const se=u=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(u);return s.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:oe==="LIVE_OPS"?"transparent":"var(--color-bg-app)",backdropFilter:oe==="LIVE_OPS"?"none":"blur(20px)",boxShadow:oe==="LIVE_OPS"?"none":"0 0 50px rgba(0,0,0,0.5)",border:oe==="LIVE_OPS"?"none":"1px solid var(--color-border-subtle)",pointerEvents:"auto",color:"var(--color-text-primary)",zIndex:100,padding:"var(--spacing-xl)",display:"flex",flexDirection:"column",fontFamily:"var(--font-main)"},children:oe==="LIVE_OPS"?s.jsx("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:s.jsx(mn,{opsCommand:k,simulationData:{...f,services:e||f?.services,vehicles:n||f?.vehicles},planes:i})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",pointerEvents:"auto"},children:[s.jsx(it,{activeTab:ne,onTabChange:st,tabs:[{id:"PROGRAMACION",label:"AGENDA",icon:"ðŸ“…"},{id:"FINANCE",label:"FINANZAS",icon:"ðŸ’°"},{id:"CLIENTS",label:"CLIENTES",icon:"ðŸ¢"},{id:"MARKETING",label:"MERCADO",icon:"ðŸ“¢"},{id:"WAR_ROOM",label:"WAR ROOM",icon:"âš”ï¸"}]}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx(de,{label:ve?"ðŸ”“ EXIT AUDIT":"ðŸ”’ AUDIT MODE",active:ve,onClick:()=>lt(!ve),variant:"secondary"}),s.jsx(de,{label:"âœ– CLOSE",onClick:l,variant:"danger"})]})]}),s.jsx("div",{style:{pointerEvents:"auto"},children:s.jsx(pt,{})}),s.jsxs("div",{style:{flex:1,overflowY:"auto",paddingRight:"10px",pointerEvents:"auto"},children:[ne==="PROGRAMACION"&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[s.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[s.jsx("h3",{children:"METRICAS OPERATIVAS"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"Eficiencia"}),s.jsxs("div",{className:"value-lg",style:{color:"var(--color-kpi-positive)"},children:[Ie.efficiency,"%"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"Conflictos"}),s.jsx("div",{className:"value-lg",style:{color:Ie.errorRate>0?"var(--color-kpi-danger)":"var(--color-text-secondary)"},children:f?.conflicts?.cancellations||0})]})]})]}),s.jsxs("div",{className:"glass-panel",style:{padding:"20px",gridColumn:"span 2"},children:[s.jsx("h3",{children:"ORQUESTADOR DE IA (WORKFORCE)"}),s.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px"},children:ut.nodes.map((u,C)=>s.jsxs("div",{style:{textAlign:"center",opacity:u.status==="IDLE"?.4:1,width:"18%"},children:[s.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px",filter:u.status==="WORKING"?"drop-shadow(0 0 8px cyan)":"none"},children:u.icon}),s.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#fff"},children:u.label}),s.jsx("div",{style:{fontSize:"0.7rem",color:"#aaa",height:"15px"},children:u.status==="WORKING"?u.logs[0]:u.status}),s.jsx("div",{style:{height:"4px",background:"#333",marginTop:"5px",borderRadius:"2px"},children:s.jsx("div",{style:{width:`${u.load}%`,height:"100%",background:u.id==="DISPATCH"?"#10b981":"#06b6d4",transition:"width 0.2s"}})})]},u.id))}),s.jsx("div",{style:{marginTop:"20px",background:"#000",padding:"10px",borderRadius:"4px",height:"100px",overflowY:"auto",fontFamily:"monospace",fontSize:"0.8rem",color:"#39FF14"},children:yt.map((u,C)=>s.jsxs("div",{children:["[",u.time,"] ",u.msg]},C))})]})]}),ne==="FINANCE"&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 3fr",gap:"20px"},children:[s.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[s.jsxs("h2",{children:["CAJA: ",se($.margin)]}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"Ingresos Totales"}),s.jsx("div",{className:"value",children:se($.totalRevenue)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"Costos Operativos"}),s.jsx("div",{className:"value",style:{color:"#ef4444"},children:se($.totalCost)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"Margen Neto"}),s.jsxs("div",{className:"value",style:{color:"#39FF14"},children:[$.marginPercent,"%"]})]}),s.jsx("hr",{style:{borderColor:"#333"}}),s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"CxC Pendiente"}),s.jsx("div",{className:"value",style:{color:"#f59e0b"},children:se($.cxcPending)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"CxP Drivers"}),s.jsx("div",{className:"value",style:{color:"#6366f1"},children:se($.cxpPending)})]})]}),s.jsx("div",{style:{marginTop:"30px"},children:s.jsx(de,{label:"ðŸ” AUDITAR CAJA",onClick:at})})]}),s.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[s.jsx("h3",{children:"PROYECCIÃ“N DE FLUJO DE CAJA (STRESS TEST)"}),s.jsxs("div",{style:{height:"300px",display:"flex",alignItems:"flex-end",gap:"2px",paddingBottom:"20px",borderBottom:"1px solid #333",position:"relative"},children:[z&&z.graphPath&&s.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[s.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#333",strokeDasharray:"2",strokeWidth:"0.5"}),s.jsx("path",{d:z.graphPath,fill:"none",stroke:z.status==="INSOLVENT"?"#ef4444":"#39FF14",strokeWidth:"1.5",vectorEffect:"non-scaling-stroke"}),s.jsx("path",{d:`${z.graphPath} L 100 100 L 0 100 Z`,fill:z.status==="INSOLVENT"?"rgba(239, 68, 68, 0.1)":"rgba(57, 255, 20, 0.1)",stroke:"none"})]}),s.jsxs("div",{style:{position:"absolute",top:10,right:10,textAlign:"right"},children:[s.jsx("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"RUNWAY ACTUAL"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:z?.runway==="âˆž"?"#39FF14":"#ef4444"},children:z?.runway})]})]}),s.jsxs("p",{style:{fontSize:"0.8rem",color:"#666",marginTop:"10px"},children:["* ProyecciÃ³n basada en ",$.cxcPending>0?"ciclo de cobro actual":"datos histÃ³ricos","."]})]})]}),ne==="WAR_ROOM"&&s.jsxs("div",{className:"glass-panel",style:{padding:"30px",maxWidth:"800px",margin:"0 auto"},children:[s.jsx("h2",{style:{color:"#ef4444"},children:"âš”ï¸ COMMAND CENTER (WAR ROOM) âš”ï¸"}),s.jsx("p",{children:"Ajuste parÃ¡metros globales de simulaciÃ³n. Use con precauciÃ³n."}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px",marginTop:"30px"},children:[s.jsxs("div",{children:[s.jsx("h4",{children:"ESCENARIO DE ESTRÃ‰S"}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{children:"DÃ­as de Cartera (CxC)"}),s.jsx("input",{type:"range",min:"0",max:"120",value:M.cxcDays,onChange:u=>ye({...M,cxcDays:u.target.value}),style:{width:"100%"}}),s.jsxs("div",{style:{textAlign:"right",color:"#39FF14"},children:[M.cxcDays," DÃ­as"]})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{children:"Frecuencia NÃ³mina"}),s.jsxs("select",{value:M.cxpFreq,onChange:u=>ye({...M,cxpFreq:parseInt(u.target.value)}),style:{width:"100%",background:"#000",color:"#fff",padding:"5px"},children:[s.jsx("option",{value:15,children:"Quincenal (15)"}),s.jsx("option",{value:30,children:"Mensual (30)"}),s.jsx("option",{value:7,children:"Semanal (7)"})]})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",justifyContent:"center"},children:[s.jsx(de,{label:"ðŸš¨ SIMULAR QUIEBRA (STRESS TEST)",variant:"danger",onClick:()=>{ye({cxcDays:90,cxpFreq:7,growth:.5}),alert("Simulando escenario 'Perfect Storm'...")}}),s.jsx(de,{label:"ðŸ“„ DESCARGAR REPORTE PDF",variant:"primary",onClick:ft})]})]})]}),["CLIENTS","MARKETING"].includes(ne)&&s.jsxs("div",{style:{textAlign:"center",padding:"50px",color:"#666"},children:[s.jsxs("h1",{children:["MÃ“DULO ",ne]}),s.jsx("p",{children:"Datos en vivo conectando con API v4..."})]})]})]})})};export{zn as default};
